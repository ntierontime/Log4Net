var awe=function(){function A(a,b,c){var f="aweready";c||(f+=" change");d.each(a.data.vals,function(a,c){d("#"+c).bind(f,b)})}function k(a,b){var c=0;d.each(a.data.vals,function(a,b){d("#"+b).data("notr")&&c++});0==c&&b()}function l(a){a.v.change();N(a.v)}function N(a){a.valid&&0<a.closest("form").length&&a.valid()}function D(a,b){var c;c=a.hasClass("awe-array")?(c=d.parseJSON(a.val()))?c:[]:[a.val()];return B(c,b)}function O(a){var b=[],c;for(c in a)$.isArray(a[c])?b=b.concat(B(a[c],c)):b.push({name:c,
value:a[c]});return b}function B(a,b){var c=[];d.isArray(a)||(a=[a]);for(var f=0;f<a.length;f++)c.push({name:b,value:a[f]});return c}function s(a,b){var c=[];a.v&&!b&&(c=c.concat(D(a.v,"v")));d.each(a.data.keys,function(b,e){c=c.concat(D(d("#"+a.data.vals[b]),e))});d.each(a.pars.keys,function(b,d){c=c.concat(B(a.pars.vals[b],d))});return c}function t(a){a.prev().remove()}function h(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function x(a){a.v=d("#"+a.i);a.f=a.v.parent();a.d=a.f.find(".awe-display")}
function I(a){a=d(a);return a.outerHeight(!0)-a.height()}function C(a,b,c){c||(c=1);var d=s(a,a),d=d.concat(b);a.params&&(d=d.concat(a.params));a.srl.before(u);a.srl.empty();b=[{name:"page",value:c}];if(a.tl)var e=a.srl.closest("table").find("thead:first").html()?!1:!0,b=b.concat({name:"isTheadEmpty",value:e});q(a.searchUrl,d.concat(b),function(b){b=awe.readd(b);a.srl.empty();P(a,b,d,c)},function(){t(a.srl)})}function Q(a,b,c){if(null!=b){void 0!=b.Thead&&c.closest("table").find("thead:first").html(b.Thead);
var f=c.find(".awe-li").map(function(){return d(this).data("val")});void 0!=b.Content?(b=d("<div/>").append(b.Content),b.find(".awe-li").each(function(){0<=d.inArray(d(this).data("val"),f)&&d(this).remove()}),c.append(b.children())):d.each(b.Items,function(b,i){var p=a.mode?"":"<button type='button' class='awe-movebtn awe-btn'><span class='awe-icon'></span></button>";0>d.inArray(i.K,f)&&c.append("<li class='awe-li' data-val='"+i.K+"'>"+p+i.C+" </li>")});a.dg&&c.find(".awe-li").draggable({cancel:"button",
revert:"invalid",helper:"clone",cursor:"move"})}}function P(a,b,c,f){Q(a,b,a.srl);if(b.More)if(b=d('<div class="awe-morebtn">'+a.mt+"</div>").click(function(){f++;var b=d(this);b.after("<div class='awe-loading'><span></span></div>");b.hide();var e=[{name:"isMoreClick",value:!0},{name:"page",value:f}];if(a.tl)var y=a.srl.closest("table").find("thead:first").html()?!1:!0,e=e.concat({name:"isTheadEmpty",value:y});q(a.searchUrl,c.concat(e),function(b){P(a,awe.readd(b),c,f)},function(){b.closest(".awe-li").remove()})}),
a.tl){var e=a.srl.find(".awe-li:not(.awe-morecont):first > td").length,e=d('<tr class="awe-li awe-morecont"><td colspan="'+e+'"></td></tr>');a.srl.append(e);a.srl.find("tr:last td").append(b)}else a.srl.append('<li class="awe-li awe-morecont"></li>'),a.srl.find("li:last").append(b)}function J(a,b){return a.replace(/{(\d+)}/g,function(a,d){return"undefined"!=typeof b[d]?b[d]:a})}function R(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return parseInt(c,10)+1;return 0}function q(a,b,c,d){n({url:a,data:b,
success:c},d)}function n(a,b){a.type||(a.type="post");a.traditional=!0;d.ajax(a).complete(b).error(awe.err)}var d=jQuery;d(function(){d("body").append('<a href="http://www.aspnetawesome.com">built using Trial version of ASP.net MVC Awesome 3.0 www.aspnetawesome.com</a>')});var u="<div class='awe-loading'><span></span></div>";return{err:function(){},errMsg:function(){return""},test:function(){},grid:function(a){function b(){r&&r.setItem(a.pk,JSON.stringify([a,v]))}function c(b){return a.columns[b.data("i")]}
function f(){E.find(".awe-groupable").draggable({helper:"clone",containment:g,cursorAt:{left:15},distance:5});z.droppable({accept:E.find(".awe-groupable"),activeClass:"awe-highlight",drop:function(b,c){var f=c.draggable.data("i"),f=a.columns[f];if(!f.Gd){var j=0;d.each(a.columns,function(a,b){b.Gd&&b.Gk>j&&(j=b.Gk)});f.Gd=1;f.Gk=j+1;e(1);h()}}})}function e(b){z.empty();b||(E.empty(),g.find("colgroup").empty());for(var c=[],e=0;e<a.columns.length;e++){var j=a.columns[e];j.i=e;j.Gd&&(c.push(j),j.Sort||
(j.Sort=1));if(!(j.Gd&&!a.sgc||b)){var p="<col "+(j.W?"style='width:"+j.W+"'":"")+" />";g.find("colgroup").append(p);a.sh&&(j=J("<th><div class='awe-col {3} {4} {5}' unselectable='on' data-i={0} >{1}{2}</div></th>",[e,j.N,x,j.S?"awe-sortable":"",j.G?"awe-groupable":"",t[j.Sort]]),E.append(j))}}b||d.each(c,function(){g.find("colgroup").prepend('<col class="awe-idn"/>');E.prepend('<th class="awe-idn"></th>')});a.gl=c.length;c.sort(function(a,b){return a.Gk-b.Gk});d.each(c,function(a,b){z.find(".awe-col").length||
z.empty();z.append(J("<div class='awe-col {3}' data-i='{1}'><div class='awe-il awe-sortable'>{2}{0}</div><div class='awe-il'>{4}</span></div></div>",[b.N,b.i,x,t[b.Sort],b.Gr?'<span class="awe-rem">':""]))});c.length||z.html(a.gbt);f();i()}function i(){var b=g.height(),c=z.outerHeight(!0),d=g.find(".awe-footer").outerHeight(!0),e=g.find(".awe-header"),f=g.find(".awe-content");a.h&&(f.css("overflow-y","scroll"),f.height(b-(c+d+e.outerHeight(!0))),e.css("padding-right",p()+"px"),e[0].style.display=
"none",e[0].offsetHeight,e[0].style.display="block");a.mh&&f.css("min-height",a.mh-(c+d+e.outerHeight(!0)))}function p(){var a=document.createElement("p");a.style.width="100%";a.style.height="200px";var b=document.createElement("div");b.style.position="absolute";b.style.top="0px";b.style.left="0px";b.style.visibility="hidden";b.style.width="200px";b.style.height="150px";b.style.overflow="hidden";b.appendChild(a);document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";a=a.offsetWidth;
c==a&&(a=b.clientWidth);document.body.removeChild(b);return c-a}function y(a,b,c,d){for(;;){var e=a.data("lvl");if(!e)break;e=parseInt(e,10);if(e<b)break;if(e==b&&!a.hasClass("awe-gfoot"))break;if(d==e&&!a.hasClass("awe-gfoot")||d>e)d=!1;d||(c?a.hide():a.show());a.hasClass("awe-collapsed")&&!d?y(a.next(),b,c,e):y(a.next(),b,c,d);break}}function h(c){function f(b,c,e){function i(a){for(var b="";0<a&&a--;)b+="<td class='awe-idn'></td>";return b}function j(b,c){b||(b="");if(R(a.dates,c)&&"/Date"==b.substr(0,
5))var e=new Date(parseInt(b.substr(6))),b=d.datepicker.formatDate(a.F,e);return b}function S(a,b){var c=a,e=[],f;for(f in b)e.push(f);d.each(e,function(a,d){var e=j(b[d],d);c=c.split("."+d).join(e)});return c}function p(b,c,e,f,g){var h=i(k),m="";d(a.columns).each(function(c,d){if(d.Gd&&!a.sgc)return 1;var e="";!g&&(d.F||d.T)?d.F?e=d.F(b):d.T&&(e=S(d.T,b)):e=j(b[d.P],d.P);m="<td"===e.toString().substring(0,3)?m+e:m+("<td>"+e+"</td>")});return J("<tr {4} data-lvl='{0}' class='{1}'>{2}{3}</tr>",[c,
e,h,m,f?"style='display:none;'":""])}var h=!1,g="",m=b.Header;m&&(h=null!=v[m.Key+c.toString()]?v[m.Key+c.toString()]:m.Collapsed,g+="<tr "+(e?"style='display:none;'":"")+" data-i='"+m.Key+c.toString()+"' data-lvl='"+c+"' class='awe-ghead"+(h?" awe-collapsed":"")+(a.cohc?" awe-ceb":"")+"'>",g+=i(c-1),m=a.columns.length+k-(c-1),a.sgc||(m-=k),g+="<td colspan='"+m+"'><span class='awe-ce-ico"+(!a.cohc?" awe-ceb":"")+"'></span>"+b.Header.Content+"</td>",g+="</tr>");!e&&h&&(e=!0);b.Groups&&d.each(b.Groups,
function(a,b){g+=f(b,c+1,e)});b.Items&&d.each(b.Items,function(b,d){var f=0==b%2?"":" awe-alt";a.rcf&&(f+=" "+S(a.rcf,d));g+=p(d,c+1,"awe-row"+f,e)});b.Footer&&(g+=p(b.Footer,c,"awe-gfoot",e,1));return g}var i,j=[],p=[];d.each(a.columns,function(a,b){b.Gd?j.push(b):0!=b.Sort&&p.push(b)});j.sort(function(a,b){return a.Gk-b.Gk});p.sort(function(a,b){return a.So-b.So});i=j.concat(p);var y=["","asc","desc"],w=s(a);a.params&&(w=w.concat(a.params));c&&(a.pg=c);w.push({name:"page",value:a.pg});w.push({name:"key",
value:a.k});for(c=0;c<i.length;c++)w.push({name:"SortNames",value:i[c].P}),w.push({name:"SortDirections",value:y[i[c].Sort]});for(i=0;i<j.length;i++)w.push({name:"Groups",value:j[i].P}),w.push({name:"Headers",value:j[i].N});var k=j.length;g.find(".awe-relbox").append(u);q(a.url,w,function(c){c=awe.readd(c);null!=c&&(a.pg>c.PageCount&&(a.pg=1,c.PageCount&&h()),e(),e(),b(),r||(v={}),a.dates=c.Dates,B.find("tbody").html(f(c.Data,0)),g.find(".awe-pager").html(8>c.PageCount?l(1,c.PageCount,a.pg):5>a.pg?
l(1,5,a.pg)+" ... "+n(c.PageCount,a.pg):a.pg>c.PageCount-5?n(1,a.pg)+" ... "+l(c.PageCount-5,c.PageCount,a.pg):n(1,a.pg)+" ... "+l(a.pg-2,a.pg+2,a.pg)+" ... "+n(c.PageCount,a.pg)),g.find(".awe-pager a").click(function(){g.find(".awe-pager .awe-selected").removeClass("awe-selected");d(this).addClass("awe-selected");a.pg=parseInt(d(this).data("p"));h()}))},function(){g.find(".awe-relbox .awe-loading").remove()})}function l(a,b,c){for(var d="";a<=b;a++)d+=n(a,c);return d}function n(a,b,c){c||(c=a);return J("<a data-p='{0}' class='awe-btn awe-pager-btn {1}'><span class='awe-btn-content'>{2}</span></a>",
[a,b!=a?"":"awe-selected",c])}var t=["","awe-asc","awe-desc"],x="<span class='awe-sord'></span>";a.So=100;a.pg=1;a.pk=(!a.pk?a.i:a.pk)+a.prs;var D=d.extend(!0,{},a),g=d("#"+a.i),B=d("#"+a.i).find(".awe-table"),E=g.find(".awe-hrow"),z=g.find(".awe-groupbar"),v={},r=0;try{if(1==a.prs)var C={},r={setItem:function(a,b){C[a]=b},getItem:function(a){return C[a]}};else 2==a.prs?r=sessionStorage:3==a.prs&&(r=localStorage)}catch(I){}a.h&&d(window).bind("resize",i);g.find(".awe-reload").click(function(){F.reset()});
var F=function(){};g.data("api",F);F.clearpersist=function(){r&&r.removeItem(a.pk)};F.reset=function(){v={};a=d.extend(!0,{},D);e(1);h(1)};F.load=function(b){if(b&&(b.params&&(a.params=O(b.params)),b.group&&(d.each(a.columns,function(a,c){var d=R(b.group,c.P);d?(c.Gd=1,c.Gk=d):c.Gd=0}),z.empty()),b.sort)){var c=0;d.each(a.columns,function(a,e){var f=0;d.each(b.sort,function(a,b){if(e.P==b.Prop)return f=b,!1});f?(e.Sort=f.Sort,e.So=c++):e.Sort=0})}e(1);h()};g.delegate(".awe-rem","click",function(){var f=
c($(this).closest(".awe-col")),i=f.Gd=0;d.each(a.columns,function(a,b){b.So<i&&(i=b.So)});f.So=i-1;b();e(1);h(1)});B.on("click",".awe-ceb",function(){var a=d(this).closest(".awe-ghead"),c=parseInt(a.data("lvl"),10),e=a.next(),f=a.data("i");a.hasClass("awe-collapsed")?(a.removeClass("awe-collapsed"),y(e,c,!1),v[f]=0):(a.addClass("awe-collapsed"),y(e,c,!0),v[f]=1);b()});g.on("click",".awe-sortable",function(){var e=d(this);e.parent().hasClass("awe-col")&&(e=e.parent());var f=c(e),i=f.Sort+1;3==i&&(i=
f.Gd?1:0);f.Sort=i;g.find("[data-i="+e.data("i")+"]").removeClass("awe-asc awe-desc").addClass(t[i]);f.Gd||(a.s&&d.each(a.columns,function(a,b){if(b.Gd||b.P==f.P)return 1;b.Sort=0;E.find("[data-i="+a+"]").removeClass("awe-asc awe-desc")}),1==i&&(c(e).So=++a.So));b();h()});if(r){var K=d.parseJSON(r.getItem(a.pk));if(K&&2==K.length){var L=K[0];if(L.columns.length==a.columns.length){a.pg=L.pg;a.So=L.So;for(var M=0;M<a.columns.length;M++){var G=a.columns[M],H=L.columns[M];G.P==H.P&&(G.Gd=H.Gd,G.Gk=H.Gk,
G.So=H.So,G.Sort=H.Sort)}v=K[1]}}}else v={};e();f();k(a,function(){h()});A(a,function(){k(a,function(){h(1)})},!a.lpc)},form:function(a){var b="."+a.cl;d(document).off("submit.awe",b).on("submit.awe",b,function(b){function f(){a.notok=1;if(a.ua){var b=a.u,c=e.attr("action");n({url:!b?c:b,data:e.serialize(),success:function(b){"object"==typeof b||!a.ff?(a.sf&&a.sf(b),e.trigger("aweformsuccess",b)):e.html(b);a.notok=0}})}else e.data("aweex",1),a.u&&e.attr("action",a.u),e.submit()}var e=d(this);e.data("aweex")||
(h(b),!(a.bf&&!1===a.bf(e))&&!a.notok&&(a.c?(a.d=d("<div>"+a.ms+"</div>"),awe.popup({d:a.d,w:a.w,h:a.h,title:a.title,m:a.m,dntr:1,pos:a.pos,btns:[{text:a.yes,click:function(){f();$("input:visible:first").focus();d(this).dialog("close")}},{text:a.no,click:function(){d(this).dialog("close")}}]}),a.d.dialog("open"),d(".ui-dialog-buttonset button").blur()):f()))})},autocomplete:function(a){a.v=a.d=d("#"+a.i);var b=null;a.k&&(b=d("#"+a.k));a.d.autocomplete({minLength:a.ml,source:function(b,f){var e=s(a);
n({url:a.url,dataType:"json",data:e,success:function(a){f(d.map(a,function(a){return{label:a.C,value:a.C,id:a.K}}))}})}});a.d.bind("autocompleteselect",function(c,d){b&&b.val(d.item?d.item.id:null).trigger("change");a.d.trigger("change")});b&&a.d.keyup(function(a){"13"!=a.which&&b.val(null).trigger("change")})},txt:function(a){a.d=a.v=d("#"+a.i);a.v.data("numeric")&&a.d.keydown(function(a){var c=a.which;46==c||(8==c||9==c||27==c||65==c&&!0===a.ctrlKey||35<=c&&39>=c)||((48>c||57<c)&&(96>c||105<c)?
a.preventDefault():!0===a.shiftKey&&h(a))})},dtp:function(a){x(a);a.d.datepicker({dateFormat:a.format,changeMonth:a.cm,changeYear:a.cy});a.f.find(".awe-dpbtn").click(function(b){h(b);a.d.focus()});a.f.find(".awe-clearbtn").click(function(b){h(b);a.d.val("").change()})},ajaxList:function(a){function b(b){b||(b=1);C(a,[],b)}a.v=d("#"+a.i);a.srl=a.tl?a.v.find(".awe-srl"):a.v;a.mode="s";var c=function(){};a.v.data("api",c);c.load=c.load=function(c){c&&c.params&&(a.params=O(c.params));b(1)};k(a,b);A(a,
function(){k(a,function(){b(1)})},!a.lpc)},checkboxList:function(a){function b(){a.d.before(u);n({url:a.url,data:s(a),success:function(b){a.d.empty();b=awe.readd(b);null!=b&&d.each(b,function(b,c){a.d.append("<li><input "+(a.e?"":"disabled='disabled'")+(c.S?'checked="checked"':"")+'id="'+a.i+"_item_"+b+'" name="'+a.v.data("name")+'" value="'+c.V+'" type="checkbox"/><label for="'+a.i+"_item_"+b+'">'+c.T+"</label></li>")});b=JSON.stringify(d(a.d.find("input:checked")).map(function(){return d(this).val()}).get());
"[]"==b&&(b="");b!=a.v.val()&&(a.v.val(b),l(a))}},function(){t(a.d)})}x(a);k(a,b);A(a,function(){k(a,b)});a.d.delegate("input","change",function(){var b=JSON.stringify(d(a.d.find("input:checked")).map(function(){return d(this).val()}).get());"[]"==b&&(b="");a.v.val(b);l(a)})},radioList:function(a){function b(){a.d.before(u);n({url:a.url,data:s(a),success:function(b){a.d.empty();var b=awe.readd(b),f;null!=b&&d.each(b,function(b,c){var d=a.e?"":"disabled='disabled'";!0==c.S&&(f=c.V);a.d.append("<li><input type='radio' "+
d+" value='"+c.V+"' name='"+a.i+"' id='"+a.i+"_item_"+b+"'/><label for='"+a.i+"_item_"+b+"' >"+c.T+"</label></li>")});"undefined"!==typeof f&&a.d.find("input:radio").filter("[value="+f+"]").attr("checked",!0);"undefined"===typeof f&&(f="");a.v.val()!=f&&(a.v.val(f),l(a))}},function(){t(a.d)})}x(a);k(a,b);A(a,function(){k(a,b)});a.d.delegate("input","change",function(){a.v.val(a.d.find("input:checked").val());l(a)})},lookup:function(a){function b(b){a.d.html("");a.v.val()&&(a.d.html(u),q(a.getUrl,
s(a),function(c){a.d.html("");c=awe.readd(c);null!=c&&a.d.html(c.C);a.hi&&1!=b&&(a.d.addClass("awe-changing"),a.d.removeClass("awe-changing",1E3))}))}function c(){var b=a.div,c=d("#"+b).height()-(d("#"+b+" .awe-search:first").outerHeight()+I("#"+b+" .awe-srlcont:first")+10);d("#"+b+" .awe-list").css("height",1*c+"px")}x(a);a.div=a.i+"-awepw";a.soc=!0;a.mode="s";A(a,function(){a.soc=!0});d("#"+a.div).length||a.d.after("<div id='"+a.i+"-awepw' class='awe-lookup-popup' style='display:none;'><form class='awe-search'></form><div class='awe-list awe-srlcont'>"+
(a.tl?"<table><thead></thead><tbody class='awe-srl'></tbody></table>":"<ul class='awe-srl'></ul>")+"</div></div>");a.p=d("#"+a.div);awe.popup({d:a.p,w:a.w,h:a.h,fulls:a.fulls,pos:"center",res:!1,title:a.title,m:a.m,dntr:1,pc:a.pc,btns:[{text:a.ok,click:function(){a.v.val(a.p.find(".awe-selected").data("val"));l(a);a.ms=0;a.p.dialog("close")}},{text:a.cancel,click:function(){d(this).dialog("close")}}]});a.p.bind("dialogclose",function(){a.ms&&a.p.find(".awe-li").removeClass("awe-selected");a.ms=0;
a.f.find(".awe-openbtn").focus()});a.srl=a.p.find(".awe-srl");var f="#"+a.div+" .awe-li:not(.awe-morecont)";d(document).off("click",f).on("click",f,function(){a.p.find(".awe-li").removeClass("awe-selected");d(this).addClass("awe-selected");a.ms=1}).off("dblclick",f).on("dblclick",f,function(){a.v.val(d(this).data("val"));l(a);a.ms=0;d("#"+a.div).dialog("close")});d("#"+a.div).bind("dialogresize",c);b(1);a.v.change(b);a.f.find(".awe-clearbtn").click(function(b){h(b);a.v.val("");l(a);a.soc=!0});a.f.find(".awe-openbtn").click(function(b){h(b);
a.p.dialog("open");a.fm||(a.fm=a.p.find(".awe-search"),a.fm.delegate("*","change",c),a.fm.unbind("submit").submit(function(b){h(b);a.fm.find("[data-notr]").length||C(a,a.fm.serializeArray())}));a.soc&&(a.fm.html()?a.fm.submit():a.sf?q(a.sf,{},function(b){a.fm.html(b);a.fm.submit();c();a.sc&&a.fm.find("input[type=hidden], select[name]").bind("change aweready",function(){a.fm.submit()})}):(a.fm.html('<table><tr><td><input type="text" name="search" class="awe-searchtxt"/></td><td><button type="submit" class="awe-searchbtn awe-btn">'+
a.st+"</button></td></tr></table>"),a.fm.submit()));a.soc=!1;c()})},add:function(a){function b(){a.d.before(u);q(a.url,s(a),function(b){a.d.empty();b=awe.readd(b);null!=b&&d.each(b,function(b,c){var d="";!0==c.S&&(d="selected = 'selected'");a.d.append("<option "+d+' value="'+c.V+'">'+c.T+"</option>")});a.d.change();"1"==a.v.data("notr")&&(a.v.data("notr",0),a.v.removeAttr("data-notr"),a.v.trigger("aweready"))},function(){t(a.d)})}a.v=d("#"+a.i);a.d=a.v.next();k(a,b);A(a,function(){k(a,b)});a.d.keyup(function(){d(this).change()}).change(function(){a.v.val()!=
a.d.val()&&(a.v.val(a.d.val()),a.v.attr("data-notr")||l(a))})},readd:function(a,b){return!b&&"object"!=typeof a?(awe.err({responseText:a}),null):("object"==typeof a||"string"==typeof a)&&null!=a?a:null},pf:function(a,b){h(a);var c;0==d("#"+b.i).length?c=d('<div id="'+b.i+'"></div>'):(c=d("#"+b.i),c.dialog("close"));c.undelegate("form","submit");c.delegate("form","submit",function(a){h(a);b.notok||(b.notok=1,a=$(this),q(a.attr("action"),a.serialize(),function(a){"object"==typeof a?(b.sf&&b.sf(a),c.trigger("awepopupformsuccess",
a),b.rs&&location.reload(!0),c.dialog("close")):c.html(a);b.notok=0}))});c.html(u);n({type:"get",url:b.u,cache:!1,success:function(a){c.html(a);c.find("input:visible:first").focus()}});for(var f=[],e=0;e<b.b.length;e+=2)f.push({text:b.b[e],click:b.b[e+1]});f=f.concat([{text:b.ot,click:function(){c.find("form").submit()}},{text:b.ct,click:function(){c.dialog("close")}}]);awe.popup({w:b.w,h:b.h,pos:b.p,res:b.r,m:b.m,title:b.t,d:c,btns:f,fulls:b.f,dntr:!b.rc,pc:b.pc});c.dialog("open")},op:function(a,
b){h(a);var c;0==d("#"+b.i).length?c=d('<div id="'+b.i+'"></div>'):(c=d("#"+b.i),c.dialog("close"));b.c&&c.html(b.c);b.u&&n({type:"get",url:b.u,cache:!1,success:function(a){c.html(a)}});for(var f=[],e=0;e<b.b.length;e+=2)f.push({text:b.b[e],click:b.b[e+1]});awe.popup({w:b.w,h:b.h,pos:b.p,res:b.r,m:b.m,title:b.t,d:c,btns:f,fulls:b.f,dntr:!b.rc,pc:b.pc});c.dialog("open")},popup:function(a){draggable=!0;a.fulls&&(a.res=!1);a.fulls&&(draggable=!1);a.pos||(a.pos="center");a.res||(a.res=!1);var b;b=a.d?
a.d:d("#"+a.i);b.dialog({draggable:draggable,width:a.fulls?d(window).width()-50:a.w,height:a.fulls?d(window).height()-50:a.h,modal:a.m,resizable:a.res,buttons:a.btns,autoOpen:!1,title:a.title});a.pos&&b.dialog("option","position",a.pos);a.dntr||b.bind("dialogclose",function(){d("#"+a.i).find("*").remove();d(this).remove()});var c="awe-popup";a.pc&&(c=c+" "+a.pc);b.dialog("option",{dialogClass:c});a.fulls&&d(window).bind("resize",function(){b.dialog("option",{height:d(window).height()-50,width:d(window).width()-
50}).trigger("dialogresize")})},multilookup:function(a){function b(){var b=a.div,c=d("#"+b).height()-(d("#"+b+" .awe-search").outerHeight(!0)+I("#"+b+" .awe-srlcont")+I("#"+b+" .awe-selcont")+10);d("#"+b+" .awe-list").css("height",0.5*c+"px")}function c(){return a.sel.find(".awe-li").map(function(){return d(this).data("val")}).get()}function f(b){var c=a.d.empty();a.v.val()&&(a.d.html("<li>"+u+"</li>"),q(a.getMultipleUrl,s(a),function(f){a.d.html("");var h=awe.readd(f);null!=h&&("object"!=typeof f?
awe.err({responseText:f}):(d.each(h,function(d,f){c.append("<li>"+f.C+"</li>");1==b&&a.v.next().append("<input type='hidden' name='"+a.v.data("name")+"' value='"+f.K+"' />")}),c.change(),a.hi&&1!=b&&(a.d.addClass("awe-changing"),a.d.removeClass("awe-changing",1E3))))}))}x(a);a.div=a.i+"-awepw";a.soc=!0;A(a,function(){a.soc=!0});d("#"+a.div).length||a.d.after("<div id='"+a.i+"-awepw' class='awe-multilookup-popup' style='display:none;'><form class='awe-search'></form><div class='awe-list awe-srlcont'>"+
(a.tl?"<table><thead></thead><tbody class='awe-srl'></tbody></table>":"<ul class='awe-srl'></ul>")+"</div><div class='awe-list awe-selcont' >"+(a.tl?"<table><thead></thead><tbody class='awe-sel'></tbody></table>":"<ul class='awe-sel'></ul>")+"</div></div>");a.p=d("#"+a.div);awe.popup({d:a.p,w:a.w,h:a.h,fulls:a.fulls,pos:"center",res:!1,title:a.title,m:a.m,dntr:1,pc:a.pc,btns:[{text:a.ok,click:function(){a.v.val(JSON.stringify(c()));a.v.next().empty();var b=c();d.each(b,function(c){a.v.next().append("<input type='hidden' name='"+
a.v.data("name")+"' value='"+b[c]+"' />")});l(a);a.ms=0;d(this).dialog("close")}},{text:a.cancel,click:function(){d(this).dialog("close")}}]});a.p.bind("dialogclose",function(){a.ms&&(a.soc=!0);a.ms=0;a.f.find(".awe-openbtn").focus()});a.srl=a.p.find(".awe-srl");a.sel=a.p.find(".awe-sel");a.srl.delegate(".awe-movebtn","click",function(){d(this).closest(".awe-li").prependTo(a.sel);a.ms=1});a.sel.delegate(".awe-movebtn","click",function(){d(this).closest(".awe-li").prependTo(a.srl);a.ms=1});a.dg&&(d("#"+
a.div+" .awe-srlcont").droppable({accept:"#"+a.div+" .awe-selcont .awe-li",activeClass:"awe-highlight",drop:function(b,c){c.draggable.prependTo(a.srl);a.ms=1}}),d("#"+a.div+" .awe-selcont").droppable({accept:"#"+a.div+" .awe-srlcont .awe-li",activeClass:"awe-highlight",drop:function(b,c){c.draggable.prependTo(a.sel);a.ms=1}}));d("#"+a.div).bind("dialogresize",b);a.v.change(f);f(1);a.f.find(".awe-clearbtn").click(function(b){h(b);a.v.next().empty();a.v.val("").change();N(a.v);a.soc=!0});a.f.find(".awe-openbtn").click(function(d){h(d);
a.p.dialog("open");a.fm||(a.fm=a.p.find(".awe-search"),a.fm.delegate("*","change",b),a.fm.unbind("submit").submit(function(b){h(b);a.fm.find("[data-notr]").length||(a.loaded?C(a,B(c(),"selected").concat(a.fm.serializeArray())):C(a,D(a.v,"selected").concat(a.fm.serializeArray())))}));if(a.soc){a.loaded=0;a.fm.html()?a.fm.submit():a.sf?q(a.sf,{},function(c){a.fm.html(c);a.fm.submit();b();a.sc&&a.fm.find("input[type=hidden], select[name]").bind("change aweready",function(){a.fm.submit()})}):(a.fm.html('<table><tr><td><input type="text" name="search" class="awe-searchtxt"/></td><td><button type="submit" class="awe-searchbtn awe-btn">'+
a.st+"</button></td></tr></table>"),a.fm.submit());a.sel.html("");a.sel.before(u);d=s(a,a);d=d.concat(D(a.v,"selected"));if(a.tl)var f=a.srl.closest("table").find("thead:first").html()?!1:!0,d=d.concat({name:"isTheadEmpty",value:f});q(a.selectedUrl,d,function(b){b=awe.readd(b);null!=b&&(Q(a,b,a.sel),a.loaded=1)},function(){t(a.sel)})}a.soc=!1;b()})}}}();
